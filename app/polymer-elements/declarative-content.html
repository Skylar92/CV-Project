<dom-module id="declarative-content">

    <style>

        :host {
            @apply(--layout-horizontal);
            @apply(--layout-center-center);
            @apply(--layout-fit);
        }

        .text {
            color: white;
        }

    </style>

    <template>

        <div id="content-view" class="fullbleed layout vertical">
            <div id="header">
                <button-back></button-back>
                <span style="text-align: center">
                    <button-back on-click="_onPrevClick"></button-back>
                    <button-back on-click="_onNextClick"></button-back>
                </span>
            </div>

            <neon-animated-pages id="views"
                                 class="flex"
                                 selected="[[selected]]"
                                 entry-animation="[[entryAnimation]]"
                                 exit-animation="[[exitAnimation]]">
                <template is="dom-repeat" items="{{dataView}}">
                    <neon-animatable id="{{item.id}}">
                        <div class="text">{{item.content}}</div>
                    </neon-animatable>
                </template>
            </neon-animated-pages>
        </div>

    </template>

</dom-module>


<script>

    DeclarativeContent = Polymer({

        is: 'declarative-content',

        /**
         * @param data - JSON object which comprises content and background color to each content.
         */
        factoryImpl: function (data) {
            this.dataView = data;
            this.dataSize = data.length - 1;
            this.selected = 0;
        },

        attached: function () {
            //init set color
            this.$.views.style.backgroundColor = this.dataView[0].color;
        },

        _onPrevClick: function () {
            var tempSelect = this.selected === 0 ? this.dataSize : (this.selected - 1);
            this.changeColorsContent(tempSelect);
            this.entryAnimation = 'slide-from-left-animation';
            this.exitAnimation = 'slide-right-animation';
            this.selected = tempSelect;
        },

        _onNextClick: function () {
            var tempSelect = this.selected === 0 ? this.dataSize : (this.selected - 1);
            this.changeColorsContent(tempSelect);
            this.entryAnimation = 'slide-from-right-animation';
            this.exitAnimation = 'slide-left-animation';
            this.selected = tempSelect;
        },

        /**
         * Set next color to neon-animatable
         * @param select - current number
         */
        changeColorsContent: function (select) {
            var styleContent = document.getElementById(this.dataView[select].id).style;
            if(styleContent == null || styleContent == undefined)
                throw DOMException('Content not yet prepared for modify styles');

            var color = this.dataView[select].color;
            if(color == null || color == undefined)
                color = 'white';

            styleContent.backgroundColor = color;
        }

    })


</script>